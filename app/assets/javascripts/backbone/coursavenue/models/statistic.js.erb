CoursAvenue.module('Models', function(Models, App, Backbone, Marionette, $, _) {
    Models.Statistic = Backbone.Model.extend({

        /*
         * structure_id - id of the structure
         * action_type  - Type of action, must be included in Statistic::ACTION_TYPES
         * params       - optional hash of params
         *
         * Save Statistic to Google Analytics
         */
        logStat: function logStat (structure_id, action_type, params) {
            var metricTypes = <%= Analytic::METRICS %>;
            var metricIndex = metricTypes.indexOf(action_type) + 1;

            if (metricIndex > 0 && metricIndex <= metricTypes.length + 1 && CoursAvenue.env == 'production') {
                var options = { 'dimension1': structure_id };
                var metricKey = 'metric' + metricIndex;

                options[metricKey] = 1;
                ga('send', 'event', 'Statistiques Profs', 'Enregistrement', options);
            }
        },
    });
});

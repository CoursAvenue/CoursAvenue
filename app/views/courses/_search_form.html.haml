- params[:types]               ||= ['lesson', 'training', 'workshop']
- params[:price_specificities] ||= []

- params[:sort]                ||= 'relevancy'
- params[:audiences]           ||= [] # Audience.all.collect(&:id).map(&:to_s)
- params[:levels]              ||= [] # Level.all.collect(&:id).map(&:to_s)
- params[:week_days]           ||= [] # I18n.t('date.day_names')
- params[:time_slots]          ||= [] # CoursMania::Application::TIME_SLOTS
- params[:price_range]         ||= {} # {min: 0, max: 1000}
- params[:time_range]          ||= {}
- params[:zip_codes]           ||= [] # (75001..75020).to_a.map(&:to_s)
- params[:age]                 ||= {}
- params[:radius]              ||= 10
%section.gw
  - if @subject
    - search_path = subject_courses_path(@subject)
  - else
    - search_path = courses_path

  = form_tag search_path, method: :get, authenticity_token: false, class: 'g one-whole', 'data-behavior' => 'course-search-form', id: 'header-search' do
    = render 'shared/header_search'

    .accessibility
      - @audiences.each_with_index do |audience, i|
        = check_box_tag 'audiences[]', audience.id, params[:audiences].include?(audience.id.to_s), id: "hidden_search_audience_#{i}"
      - @levels.each_with_index do |level, i|
        = check_box_tag 'levels[]', level[:id], params[:levels].include?(level[:id].to_s), id: "hidden_search_level_#{level[:name]}"
      = number_field_tag 'price_range[min]', params[:price_range][:min], min: 0, step: 1, id: 'hidden_search_price_range_min'
      = number_field_tag 'price_range[max]', params[:price_range][:max], min: 0, step: 1, id: 'hidden_search_price_range_max'
      = number_field_tag 'age[min]', params[:age][:max], min: 0, max: 18, step: 1, id: 'hidden_search_age_min'
      = number_field_tag 'age[max]', params[:age][:min], min: 0, max: 18, step: 1, id: 'hidden_search_age_max'

      - (75001..75020).to_a.map(&:to_s).each do |zip_code|
        = check_box_tag 'zip_codes[]', zip_code, params[:zip_codes].include?(zip_code), id: "hidden_search_arrondissement_#{zip_code}"
      %input{name: 'time_range[min]', value: params[:time_range][:min], id: 'hidden_start_time'}
      %input{name: 'time_range[max]', value: params[:time_range][:max], id: 'hidden_end_time'}

      = check_box_tag 'types[]', 'lesson'  , params[:types].include?('lesson')    , id: "hidden_search_lesson_course_type"
      = check_box_tag 'types[]', 'training', params[:types].include?('training'), id: "hidden_search_training_course_type"
      = check_box_tag 'types[]', 'workshop', params[:types].include?('workshop'), id: "hidden_search_workshop_course_type"

      = check_box_tag 'price_specificities[]', 'has_unit_course_price', params[:price_specificities].include?('has_unit_course_price')  , id: "hidden_price_specificity_unit_course"
      = check_box_tag 'price_specificities[]', 'has_package_price', params[:price_specificities].include?('has_package_price')          , id: "hidden_price_specificity_package"
      = check_box_tag 'price_specificities[]', 'has_trial_lesson', params[:price_specificities].include?('has_trial_lesson')            , id: "hidden_price_specificity_test_course"
      %input#hidden-sort-input{type: 'hidden', name: 'sort', value: params[:sort]}
      %input#radius-hidden-input{type: 'hidden', name: 'radius', value: params[:radius]}

- cache "home_screen_#{ENV["ETAG_VERSION_ID"]}" do
  .home-screen
    %h1.text--center.home-screen-title
      Réservez le bon cours au meilleur prix.
    %h5.text--center.home-screen-subtitle
      = "Parmi #{Subject.count} disciplines et #{Planning.count} séances, pour tous les âges."
    = render 'shared/home_page_search_form'
    %ul.slideshow-controller
      - 3.times do |index|
        %li{class: (index == 1 ? 'active' : '')}
    %ul#slideshow.slideshow.home-slideshow
      - @homepage_images.each do |image, image_alt|
        %li
          = image_tag image, alt: image_alt
          - #= render 'slideshow_course_info', course: promoted_course

= content_for :scripts do
  :javascript
    var slideshow;
    window.addEvent('domready', function() {
        var slideshow_navs = $$('.slideshow-controller li');
        slideshow = new SlideShow('slideshow', {
            transition: 'crossFade',
            delay: 5000,
            duration: 500,
            autoplay: true
        });
        slideshow.addEvent('show', function(event) {
            slideshow_navs.removeClass('active');
            slideshow_navs[event.next.index].addClass('active');
        });
        slideshow_navs.each(function(item, index){
            item.addEvent('click', function(event){
                event.stop();
                slideshow_navs.removeClass('active');
                item.addClass('active');
                slideshow.show(index);
            });
        });
    });

.home-screen
  %h1.text--center.home-screen-title
    Réservez le bon cours au meilleur prix.
  %h5.text--center.home-screen-subtitle
    = "Parmi #{Subject.count} disciplines et #{Planning.count} séances, pour tous les âges."
  = render 'shared/home_page_search_form'
  - unless @promoted_courses.nil?
    %ul.slideshow-controller
      - @promoted_courses.count.times do |index|
        %li{class: (index == 1 ? 'active' : '')}
    %ul#slideshow.slideshow.home-slideshow
      - @promoted_courses.each do |promoted_course|
        %li
          = render 'slideshow_course_info', course: promoted_course
          = image_tag promoted_course.homepage_image

= content_for :scripts do
  :javascript
    var slideshow;
    window.addEvent('domready', function() {
        var slideshow_navs = $$('.slideshow-controller li');
        slideshow = new SlideShow('slideshow', {
            transition: 'crossFade',
            delay: 5000,
            duration: 500,
            autoplay: true
        });
        slideshow.addEvent('show', function(event) {
            slideshow_navs.removeClass('active');
            slideshow_navs[event.next.index].addClass('active');
        });
        slideshow_navs.each(function(item, index){
            item.addEvent('click', function(event){
                event.stop();
                slideshow_navs.removeClass('active');
                item.addClass('active');
                slideshow.show(index);
            });
        });
    });

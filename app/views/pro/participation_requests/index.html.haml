= side_menu_currently_at 'activity'

= render partial: 'pro/shared/activity_tabs', locals: { current: 'participation_requests' }

.grid.push--bottom
  .grid__item.one-third>
    = link_to 'Inscrpts en attente', pro_participation_requests_path(state: 'pending'), class: ['btn btn--full', (params[:state] == 'pending' ? 'btn--blue' : '')]
  .grid__item.one-third>
    = link_to 'Inscrpts annulées', pro_participation_requests_path(state: 'canceled'), class: ['btn btn--full', (params[:state] == 'canceled' ? 'btn--blue' : '')]
  .grid__item.one-third>
    = link_to 'Inscrpts validées', pro_participation_requests_path(state: 'accepted'), class: ['btn btn--full', (params[:state] == 'accepted' ? 'btn--blue' : '')]

%h1 Inscriptions

%table.table--striped.table--data
  %thead
    %tr
      %th Date 1ere demande d'inscription
      %th Nom de l'élève
      %th Nom du prof
  %tbody
    - @participation_requests.each do |participation_request|
      %tr
        %td= l(local_time(participation_request.created_at))
        %td= link_to participation_request.user.name, user_url(participation_request.user, subdomain: CoursAvenue::Application::WWW_SUBDOMAIN)
        %td= link_to participation_request.structure.name, pro_structure_path(participation_request.structure)

.text--center.push-half--ends= paginate @participation_requests, window: 1, outer_window: 3

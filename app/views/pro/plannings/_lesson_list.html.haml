- has_multiple_teacher = @course.has_multiple_teacher?
%table.table--striped.table--data
  %thead
    %tr
      %th Jour
      %th.text--center Créneau horaire
      %th.text--center Durée
      - if @has_nb_place
        %th.text--center Places
      - if @course.is_for_kid
        %th.text--center Âge
      %th Professeur
      %th.text--center
        %i.lbc-icon-info i
      %th
  %tbody
    - @plannings.each do |planning|
      %tr{data: {'course-id' => planning.course_id}}
        %td= week_day_for planning
        %td.text--center= readable_time_slot planning.start_time, planning.end_time
        %td.text--center= readable_duration planning.duration
        - if @has_nb_place
          %td.text--center= planning.nb_place_available
        - if @course.is_for_kid
          %td.text--center
            = planning.min_age_for_kid || '-'
            - if planning.max_age_for_kid
              à
              = planning.max_age_for_kid || '-'
        %td
          = simple_form_for [:pro, @course, planning], remote: true do |f|
            = f.input :teacher_id, as: :select, collection: @teachers, label: false, input_html: {class: 'teacher-select'}
        %td.text--center
          - if planning.info.present?
            .lbc-brand-icon{data: {behavior: 'popover', content: planning.info}}
        %td.text--right
          = link_to edit_pro_course_planning_path(@course, planning), title: 'Modifier le créneau', class: 'btn btn__warning' do
            %i.icon-edit
          &nbsp;
          = link_to pro_course_planning_path(@course, planning), method: 'delete', confirm: 'Êtes-vous bien sûr de supprimer ce planning ?', title: 'Supprimer le créneau', class: 'btn btn__danger' do
            %i.icon-trash

= content_for :scripts do
  :javascript
    window.addEvent('domready', function() {
        $$('.teacher-select').each(function(teacher_select){
            teacher_select.addEvent('change', function() {
                teacher_form = this.getParent('form')
                teacher_form.submit();
            })
        });
    });

= side_menu_currently_at 'Mes cours'
%ol.nav.breadcrumb.alpha.header-group.header-group
  %li= link_to 'Tous mes cours', pro_structure_path(@structure)
  %li= link_to @course.name, edit_pro_course_path(@course)
  %li Planning

%ul.tab-titles{data: {behavior: 'tabs'}}
  %li
    = link_to edit_pro_course_path(@course), class: 'tab-el' do
      %i.lbc-icon-info i
      Info
  %li
    = link_to pro_course_prices_path(@course), class: 'tab-el' do
      € Tarif
  %li.tab-el.active
    %i.icon-calendar
    Planning

%h3 Planning du cours
- if @plannings.any?
  %h5 Séances à venir
= render "#{@course.underscore_name}_list"
%hr

%h5.form-header-group.flush--bottom
  - if action_name == 'edit'
    %i.icon-pencil
    Édition d'un créneau
  - else
    Rajouter un créneau
.form-white-box
  = render "#{@course.underscore_name}_form"

= content_for :scripts do
  :javascript
    window.addEvent('domready', function() {
        $('add-teacher').addEvent('click', function(event) {
            $('add-teacher-wrapper').dispose()
            $('new-teacher-wrapper').show();
        });
        if ($('show-past-planning')) {
            $('show-past-planning').addEvent('click', function() {
                this.remove();
                $('past-planning').removeClass('hidden');
            });
        }
        if ($$('.teacher-select').length > 0) {
            $$('.teacher-select').each(function(teacher_select){
                teacher_select.addEvent('change', function() {
                    teacher_form = this.getParent('form')
                    teacher_form.send();
                    new GLOBAL.Objects.Flash('Le professeur a bien été changé').showAndHide();
                })
            });
        }
        if ($$('.place-select').length > 0) {
            $$('.place-select').each(function(place_select){
                place_select.addEvent('change', function() {
                    planning_form = this.getParent('form')
                    planning_form.send();
                    new GLOBAL.Objects.Flash('Le lieu a bien été changé').showAndHide();
                })
            });
        }

    });

%h4.text--center Gérez vos disciplines
= simple_form_for [:pro, @structure], html: { autocomplete: 'off', id: 'structure-form' } do |f|
  %input{type: 'hidden', name: 'return_to', value: ''}
  = f.association :subjects, as: :select, collection: Subject.roots.order('name ASC'), input_html: {style: 'width: 74%;', id: 'parent-subjects', data: {behavior: 'chosen', placeholder: 'Sélectionnez une ou plusieurs disciplines'}, multiple: true}, label: 'Disciplines générales pratiquées ', label_method: lambda{|subj| subj.name }, wrapper_html: {class: 'flush--bottom'}

  #descendants-subjects
    .input{title: 'Sélectionnez plusieurs disciplines en maintenant la touche CTRL ou CMD enfoncée.', data: {behavior: 'tooltip'}}
      %label.control-label Sous disciplines
      %select#subject-descendants-select{name: 'structure[subject_descendants_ids][]', style: 'width: 74%;', multiple: true, data: {behavior: 'chosen', placeholder: 'Tapez ou sélectionnez une ou plusieurs disciplines', selected: @structure.subjects.children.map(&:id).join(',')}},
  - if @structure.errors[:children_subjects].present?
    %p.error= @structure.errors[:children_subjects].to_sentence
  = f.submit 'Enregistrer', class: 'btn btn--green btn--full'

= render 'parent_descendant_subjects'

:javascript
  jQuery.ready();
  setTimeout(function() {
      $('.fancybox-inner').css('overflow', 'visible');
  }, 100);

  $('select').bind('chosen:updated', function() {
      $(window).trigger('resize'); // To adapt fancy popups
  });
  $('select').change(function() {
      $(window).trigger('resize'); // To adapt fancy popups
  });

= side_menu_currently_at 'discovery_pass'

.panel
  .panel__header.soft
    %h3.flush Pass Découverte
  .panel__body.soft--ends
    .soft--sides{ data: { behavior: 'wizard-helper', content: t('pro.structures.courses.wizard.discovery_pass.step_1') } }
      .text--center.delta.push--bottom.line-height-1-7 Félicitations ! Vos cours sont éligibles pour le Pass Découverte CoursAvenue. 2 étapes suffisent pour proposer vos cours d'essai dans la cadre de ce Pass :

      %h4 Etape 1 : définissez le nombre de cours d'essai par personne

      %p Nous avons remarqué qu'en proposant plus d'un cours par personne, les chances de convertir les élèves qui viennent essayer vos cours en élèves réguliers (souscription à un abonnement annuel ou à un carnet de plusieurs cours) augmentent considérablement. Choisissez le nombre de cours d'essai par personne que vous souhaitez offrir dans le cadre du Pass Découverte :

      = simple_form_for [:pro, @structure], remote: true, data: { behavior: 'live-form' } do |f|
        .grid.epsilon.push-half--bottom
          .grid__item.text--center.six-tenths>
            %strong Nombre de cours d'essai par personne
          .grid__item.text--center.four-tenths>
            %strong % de conversion en élèves réguliers (statistiques)
        .grid.epsilon.push-half-bottom
          .grid__item.text--right.two-tenths>
            %input.inline-block.v-middle#discovery_pass_policy_1_trial{ type: 'radio', value: '1_trial', name: 'structure[discovery_pass_policy]', checked: @structure.discovery_pass_policy == '1_trial'}
          .grid__item.four-tenths>
            %label.inline-block.v-middle{ for: 'discovery_pass_policy_1_trial' }= t('structures.discovery_pass_policy.1_trial')
          .grid__item.four-tenths>
            %p
              %label.inline-block.v-middle{ for: 'discovery_pass_policy_1_trial' }= t('structures.discovery_pass_policy.1_trial_advantage_html')
        .grid.epsilon.push-half-bottom
          .grid__item.text--right.two-tenths>
            %input.inline-block.v-middle#discovery_pass_policy_2_trials{ type: 'radio', value: '2_trials', name: 'structure[discovery_pass_policy]', checked: @structure.discovery_pass_policy == '2_trials'}
          .grid__item.four-tenths>
            %label.inline-block.v-middle{ for: 'discovery_pass_policy_2_trials' }= t('structures.discovery_pass_policy.2_trials')
          .grid__item.four-tenths>
            %p
              %label.inline-block.v-middle{ for: 'discovery_pass_policy_2_trials' }= t('structures.discovery_pass_policy.2_trials_advantage_html')
        .grid.epsilon.push-half-bottom
          .grid__item.text--right.two-tenths>
            %input.inline-block.v-middle#discovery_pass_policy_3_trials{ type: 'radio', value: '3_trials', name: 'structure[discovery_pass_policy]', checked: @structure.discovery_pass_policy == '3_trials'}
          .grid__item.four-tenths>
            %label.inline-block.v-middle{ for: 'discovery_pass_policy_3_trials' }= t('structures.discovery_pass_policy.3_trials')
          .grid__item.four-tenths>
            %p
              %label.inline-block.v-middle{ for: 'discovery_pass_policy_3_trials' }= t('structures.discovery_pass_policy.3_trials_advantage_html')

    %hr.push--ends
    .soft--sides{ data: { behavior: 'wizard-helper', content: t('pro.structures.courses.wizard.discovery_pass.step_2') } }
      %h4 Etape 2 : choisissez les séances que vous souhaitez offrir en cours d'essai
      %p Pour proposer tous les créneaux d'un même cours, cochez la case au niveau du nom du cours. Pour proposer certaines séances uniquement, cochez les cases au niveau des créneaux :

    #lessons-header.soft.bg-white.bordered--bottom-on-stick{ data: { behavior: 'sticky', offset_top: 45, old_width: 'true', z: 300 } }
      %h3.flush Cours collectifs
    .soft--sides
      #lesson-list.block-list
        - if @courses.lessons.empty?
          %p
            Vous n'avez pas de cours collectif.
            = link_to regular_pro_structure_courses_path(@structure) do
              %i.fa.fa-plus
              Ajouter un cours collectif

        - else
          .soft-half--top.soft-half--bottom{ style: 'padding-left: 40px;'}
            = image_tag 'icons/arrow-black.png', width: 50, height: 30, class: 'v-top'
            %strong.relative.v-top.epsilon{ style: 'top: -5px; '}
              %i Cochez pour inclure dans le Pass Découverte
          - @courses.lessons.each_with_index do |course, index|
            = render partial: 'pro/structures/courses/discovery_course', locals: { course: course, structure: @structure }
    %hr.push--top.flush--bottom
    .bg-white.soft.bg-white.bordered--bottom-on-stick.relative{ data: { behavior: 'sticky', offset_top: 45, old_width: 'true', pushed: '#lessons-header', z: 400 } }
      %h3.flush Cours particuliers
    .soft--sides
      #private-list.block-list
        - if @courses.privates.empty?
          %p
            Vous n'avez pas de cours particulier.
            = link_to regular_pro_structure_courses_path(@structure) do
              %i.fa.fa-plus
              Ajouter un cours particulier
        - else
          .soft-half--top.soft-half--bottom{ style: 'padding-left: 40px;'}
            = image_tag 'icons/arrow-black.png', width: 50, height: 30, class: 'v-top'
            %strong.relative.v-top.epsilon{ style: 'top: -5px; '}
              %i Cochez pour inclure dans le Pass Découverte
          - @courses.privates.each_with_index do |course, index|
            = render partial: 'pro/structures/courses/discovery_course', locals: { course: course, structure: @structure }
    %hr.push--top.flush--bottom
    .bg-white.soft.bg-white.bordered--bottom-on-stick.relative{ data: { behavior: 'sticky', offset_top: 45, old_width: 'true', pushed: '#private-list', z: 400 } }
      %h3.flush Ateliers / Stages
    .soft--sides
      .block-list
        - if @courses.trainings.empty?
          %p
            Vous n'avez pas de stage ni d'atelier.
            = link_to trainings_pro_structure_courses_path(@structure, type: 'Course::Lesson') do
              %i.fa.fa-plus
              Ajouter un stage / atelier
        - else
          .soft-half--top.soft-half--bottom{ style: 'padding-left: 40px;'}
            = image_tag 'icons/arrow-black.png', width: 50, height: 30, class: 'v-top'
            %strong.relative.v-top.epsilon{ style: 'top: -5px; '}
              %i Cochez pour inclure dans le Pass Découverte
          - @courses.trainings.each_with_index do |course, index|
            = render partial: 'pro/structures/courses/discovery_course', locals: { course: course, structure: @structure }

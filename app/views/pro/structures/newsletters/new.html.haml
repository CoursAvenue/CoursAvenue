= side_menu_currently_at 'newsletters'

.panel
  .panel__header.soft
    %h4 Newsletter Etape 1/3 : Cr√©ation
  = render partial: 'newsletter_edit_tabs', locals: { current: 'editing' }
  .panel__body.soft
    #newsletter{ data: { type: 'newsletters-root' } }

- content_for :scripts do
  = javascript_include_tag '//cdn.ckeditor.com/4.4.4/standard/ckeditor.js'
  :javascript
      window.coursavenue = window.coursavenue || {};
      window.coursavenue.bootstrap = {
          structure: "#{ @structure.slug }",
          models: {
              layouts:  #{ @layouts.to_json },
              newsletter: #{ @newsletter.nil? ? {}.to_json : @newsletter.to_json }
          }
      };

      $(document).ready(function() {
          // TODO: Replace all the bloc_text contents.
          // CKEDITOR.replace('newsletter[content]', {
          //     customConfig: '#{asset_path('ckeditor/config.js')}'
          // });
      });

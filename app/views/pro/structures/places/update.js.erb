<% if @place.errors.empty? %>
    <% if @place.is_home? and params[:return_to_action].present? %>
        <%== params[:return_to_action] %>
        $.fancybox.close();
    <% elsif !@place.is_home? %>
        $.fancybox("<%== escape_javascript(render partial: 'pro/structures/places/verify_address') %>", { width: 600, minWidth: 600, maxWidth: 600, padding: 0, helpers: { overlay : { closeClick: false } } });
    <% end %>
    $("#place-<%= @place.id %>").replaceWith('<%= escape_javascript(render partial: "pro/structures/places/place", locals: { place: @place, structure: @structure }) %>')
    $('#place-<%= @place.id %>').yellowFade();
    window.coursavenue.redrawMap(<%== @place_coordinates.to_json %>);
<% else %>
    $.fancybox("<%== escape_javascript(render partial: 'pro/structures/places/form') %>", { width: 650, minWidth: 650, maxWidth: 650, padding: 0, helpers: { overlay : { closeClick: false } } });
<% end %>
$.each(COURSAVENUE.initialize_callbacks, function(i, func) { func(); });

- expanded = false unless expanded.present?
- medium   = false if medium.nil?
%header.header.print--hidden
  .very-soft.soft-half--sides.flexbox{class: [medium ? 'main-container--medium' : '', expanded ? '' : 'main-container']}
    .flexbox__item.palm-one-whole.v-middle>
      = link_to '', root_path, class: 'v-middle coursavenue-header-logo', title: 'CoursAvenue | Tous les cours autour de vous'
      - unless request.path == '/'
        = form_tag structures_path, method: :get, authenticity_token: false, class: 'inline-block v-middle push--left', data: { type: 'location-filter'}, id: 'header-location-form' do
          .input-with-icon.v-middle.header-search
            %input.one-whole#header-location-form-address-picker.soft-half--left{ size: 25, placeholder: 'OÃ¹ recherchez-vous un cours ?', type:'text', autocomplete: 'off', name:'address_name', data: { behavior:'address-picker', lng:'#address-lng', lat: '#address-lat', city: '#address-city', zoom: '#address-zoom' } }
            %i.fa.fa-map-marker.delta
          %input#address-lat{ type: 'hidden', name: 'lat' }
          %input#address-lng{ type: 'hidden', name: 'lng' }
          %input#address-zoom{ type: 'hidden', name: 'zoom' }
          %input.visuallyhidden{  type: 'submit' }

    %nav.text--right.flexbox__item.v-middle.nowrap.visuallyhidden--palm.print--hidden>
      #user-nav
      - if current_pro_admin
        = render partial: 'shared/headers/admin_nav'

= content_for :scripts do
  :javascript
    // ---------------- Comments slideshow
    $(function() {
        if (window.location.hash == '#connection') {
            $('#connection').click();
        }
        $('#header-location-form').submit(function() {
            return ($('#address-lat').val().length > 0);
        });
        $('#header-location-form-address-picker').on('typeahead:selected', function(event, data) {
            $('#header-location-form').submit();
        });
    });

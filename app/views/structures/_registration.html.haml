- community = @structure.community || @structure.create_community
- memberships_count = community.memberships.count
.soft.bg-blue-green.white.relative
  .text--center.absolute.north.west.height-100-percent.one-whole.fa-coursavenue-marker-logo.fa-10x.soft--top.blue-green--slightly-darker
  .relative
    .delta.line-height-1-3.f-weight-bold Besoin d'information avant de vous inscrire ?
    %p.push-half--bottom.f-weight-bold
      Posez vos questions à #{@structure.name} et à ses pratiquants !
      -# L'association et ses pratiquants sont là pour répondre à toutes vos questions !
    .push-half--bottom
      .push-half--bottom
        .v-middle.inline-block.text--center.very-soft--right{ data: { toggle: 'tooltip', title: @structure.name } }
          = image_tag @structure.logo.url(:small_thumb_100), height: 40, width: 40, class: 'rounded--circle v-middle center-block'
          -# %strong.line-height-2= truncate(@structure.name, length: 8)
        - @structure.users.with_avatar.last(3).each do |user|
          .v-middle.inline-block.text--center.very-soft--right{ data: { toggle: 'tooltip', title: user.public_name } }
            = image_tag user.avatar_url, height: 40, width: 40, class: 'rounded--circle v-middle center-block'
            -# %strong.line-height-2= truncate(user.public_name, length: 8)
        - if memberships_count > 0
          .inline-block.v-middle.f-weight-bold
            .participant-plus.text--center.center-block{ data: { toggle: 'tooltip', title: "+ #{memberships_count} pratiquant".pluralize(memberships_count) } }
              = "+#{memberships_count}"
            -# %strong.line-height-2 &nbsp;
            -# = "pratiquant".pluralize(memberships_count)
      = react_component('NewThreadTextarea', { structure: @serialized_structure, button_class: 'palm-text--center palm-one-whole palm-push--top btn btn--white-transparent btn--white-transparent--white btn--full' }, { class: 'push--bottom' })
      -# Posez toutes vos questions auprés de #{ t((@structure.structure_type or 'structures.independant') + '_for_registration_box') } ou de sa communauté de membres&nbsp;:
    -# .push--bottom
    -#   %a{ href: '#messages-publics', class: 'palm-text--center palm-one-whole palm-push--top btn btn--white-transparent btn--white-transparent--white btn--full', data: { behavior: 'scroll-to', offset_top: '-50' } }
    -#     Poser ma question
    .flexbox.push-half--bottom
      .flexbox__item.v-middle.palm-block.palm-one-whole
        %strong.epsilon Contact
      .flexbox__item.v-middle.palm-block.palm-one-whole.nowrap.one-whole.soft--left
        .grid
          - if @structure.phone_numbers.any?
            .grid__item.one-half>
              = link_to 'Téléphone', '#phone-numbers', data: { behavior: 'modal', width: 350, padding: 0, logger: 'phone_number', structure_id: @structure.id }, class: 'text--center palm-one-whole palm-push--top btn btn--white-transparent btn--white-transparent--white btn--small btn--full'
          - if @structure.website.present?
            .grid__item.one-half>
              = link_to 'Site Internet', URLHelper.fix_url(@structure.website), target: '_blank', rel: 'nofollow', data: { logger: 'website', structure_id: @structure.id }, class: 'text--center palm-one-whole palm-push--top btn btn--white-transparent btn--white-transparent--white btn--small btn--full'

  .flexbox.absolute.south.west
    .flexbox__item.f-size-12.bg-danse &nbsp;
    .flexbox__item.f-size-12.bg-theatre-scene &nbsp;
    .flexbox__item.f-size-12.bg-musique-chant &nbsp;
    .flexbox__item.f-size-12.bg-cuisine-vins &nbsp;
    .flexbox__item.f-size-12.bg-yoga-bien-etre-sante &nbsp;
    .flexbox__item.f-size-12.bg-sports-arts-martiaux &nbsp;
    .flexbox__item.f-size-12.bg-photo-video &nbsp;
    .flexbox__item.f-size-12.bg-deco-mode-bricolage &nbsp;
    .flexbox__item.f-size-12.bg-dessin-peinture-arts-plastiques &nbsp;

#phone-numbers.hidden.panel
  .panel__header.soft-half--ends.soft--sides
    .delta.f-weight-bold.line-height-2 Coordonnées
  .panel__body.soft.delta
    - phone_number_html = @structure.phone_numbers.map do |phone_number, index|
      .line-height-2
        %i.fa.fa-phone
        - phone_number_html = PhoneNumberDecorator.new(PhoneNumber.new(number: phone_number.number)).formatted_number if phone_number.number
        = phone_number_html
        = " (#{phone_number.info})" if phone_number.info.present?

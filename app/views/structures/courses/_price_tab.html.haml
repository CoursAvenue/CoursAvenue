%article
  %p
    %strong.gamma € Tarifs
  - if @course.trial
    .white-box.islet.text--center
      - if @course.trial.free?
        %h4.flush.green Cours d'essai gratuit
      - else
        Cours d'essai : #{readable_amount(@course.trial.amount)}€

  %table.table--striped.table--data.table--white#planning-schedule
    %thead
      %tr
        %th.three-tenths= t('.formule_type')
        %th.five-tenths
          Info
        %th.two-tenths.text--center= t('.price')
    %tbody
      - @prices.each do |price|
        - if price.book_ticket?
          = render partial: "prices/book_ticket", locals: { book_ticket: price }
        - else
          = render partial: "prices/price", locals: { price: price }

  - if @course.price_details.present?
    %p.white-box.islet= @course.price_details
  - if @course.registrations.any?
    .white-box.islet
      - @course.registrations.each do |registration_fee|
        %p.flush
          = t('prices.registration_fees')
          = "#{readable_amount(registration_fee.amount)}€"
          - if registration_fee.info.present?
            = "(#{registration_fee.info})"
  - if @course.discounts.any?
    .white-box.islet
      %h5.push-half--bottom Tarifs réduits
      - @course.discounts.each do |discount|
        #{t(discount.libelle)} : #{readable_amount(discount.promo_percentage)}% de réduction
  - if @structure.accepts_holiday_vouchers or @structure.accepts_ancv_sports_coupon or @structure.accepts_leisure_tickets or @structure.accepts_afdas_funding or @structure.accepts_dif_funding or @structure.accepts_cif_funding
    .white-box.islet
      %p.flush--bottom= t('.possible_funding')
      %ul
        - if @structure.accepts_holiday_vouchers
          %li= t('.holiday_vouchers')
        - if @structure.accepts_ancv_sports_coupon
          %li= t('.sport_coupons')
        - if @structure.accepts_leisure_tickets
          %li= t('.leisure_coupons')
        - if @structure.accepts_afdas_funding
          %li= t('.afdas_html')
        - if @structure.accepts_dif_funding
          %li= t('.dif_html')
        - if @structure.accepts_cif_funding
          %li= t('.cif_html')


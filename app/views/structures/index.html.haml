= content_for :head do
  - if @subject
    %link{rel: 'canonical', href: subject_structures_url(@subject)}
  - else
    %link{rel: 'canonical', href: structures_url}

= content_for :title do
  = "#{(params[:subject_id] ? "Établissements de #{@subject.name.downcase}" : 'Établissements')} #{(params[:name].present? ? "correspondant à : « #{params[:name]} »" : (params[:city].present? ? "à #{params[:city]}" : 'à Paris'))}"

= render 'shared/structures_header_search'

- @structures.each do |structure|
  .visuallyhidden{ :data => { :type => 'filtered-search-bootstrap', :total => @structure_search.total }}
    = StructureSerializer.new(structure, { root: false }).to_json

%ol.visuallyhidden.nav.breadcrumb.epsilon.push-half--top.push-half--bottom{itemprop: 'breadcrumb'}
  %li= link_to 'Tous les établissement', structures_path(name: params[:name], address_name: params[:address_name], lat: params[:lat], lng: params[:lng])
  - if @subject
    - if @subject.parent
      %li= link_to @subject.parent.name, subject_structures_path(@subject.parent, name: params[:name], address_name: params[:address_name], lat: params[:lat], lng: params[:lng])
    %li= link_to @subject.name, subject_structures_path(@subject, name: params[:name], address_name: params[:address_name], lat: params[:lat], lng: params[:lng])
  - if params[:name]
    %li= params[:name]
%h1.text--center.delta.flush.lbl.lbl--blue.visuallyhidden
  - if params[:subject_id]
    Établissements de #{@subject.name.downcase}
  - else
    Établissements
  - if params[:name].present?
    correspondant à : « #{params[:name]} »
  - elsif params[:city].present?
    = "à #{params[:city]}"
  - else
    à Paris

#filtered-search{ :data => { :type => "filtered-search-root" }}

= content_for :scripts do
  :javascript
      $(function() {
        $('body').stickem(); // For the stickiness of the sidebar
    });

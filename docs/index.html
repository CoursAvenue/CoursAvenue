<!DOCTYPE html><html><head><title>README</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="./docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="./index.html" class="source"><span class="file_name">README</span></a><a href="./app/assets/javascripts/backbone/structure_profile/application/StructureProfile.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / application / </span><span class="file_name">StructureProfile.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/behaviors/activateOn.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / behaviors / </span><span class="file_name">activateOn.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/behaviors/behaviors.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / behaviors / </span><span class="file_name">behaviors.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/behaviors/deactivateSiblings.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / behaviors / </span><span class="file_name">deactivateSiblings.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/behaviors/logOn.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / behaviors / </span><span class="file_name">logOn.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/behaviors/showWhenActive.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / behaviors / </span><span class="file_name">showWhenActive.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/components/tab_contents.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / components / </span><span class="file_name">tab_contents.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/models/place.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / models / </span><span class="file_name">place.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/models/place_collection.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / models / </span><span class="file_name">place_collection.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/models/structure.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / models / </span><span class="file_name">structure.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/manifest.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / </span><span class="file_name">manifest.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/map/google_map/info_box_view.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / map / google_map / </span><span class="file_name">info_box_view.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/map/google_map/manifest.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / map / google_map / </span><span class="file_name">manifest.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/map/google_map/google_map_view.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / map / google_map / </span><span class="file_name">google_map_view.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/map/manifest.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / map / </span><span class="file_name">manifest.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/structure/teachers/teacher_view.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / structure / teachers / </span><span class="file_name">teacher_view.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/structure/courses/course_view.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / structure / courses / </span><span class="file_name">course_view.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/structure/relational_tab_layout.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / structure / </span><span class="file_name">relational_tab_layout.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/structure/manifest.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / structure / </span><span class="file_name">manifest.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/structure/comments/comment_view.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / structure / comments / </span><span class="file_name">comment_view.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/structure_headers_layout.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / </span><span class="file_name">structure_headers_layout.js</span></a><a href="./app/assets/javascripts/backbone/structure_profile/views/tab_manager.js.html" class="source "><span class="base_path">app / assets / javascripts / backbone / structure_profile / views / </span><span class="file_name">tab_manager.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"></th><th class="code"></th></tr></thead><tbody><tr id="section"><td class="docs"><p><h3>Stats</h3><pre class="code_stats">
http://cloc.sourceforge.net v 1.55  T=0.5 s (44.0 files/s, 1482.0 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Javascript                      22            149            190            402
-------------------------------------------------------------------------------
SUM:                            22            149            190            402
-------------------------------------------------------------------------------
</pre></p></td><td id="content" class="code"><h1>Production &amp; Staging environment</h1>

<p><a href="https://devcenter.heroku.com/articles/multiple-environments">Some heroku docs</a></p>

<h2>Production</h2>

<h2>Staging</h2>

<p>$ git push staging master
$ heroku run rake db:migrate --remote staging
$ heroku ps --remote staging</p>

<h3>Pushing local branch to heroku staging</h3>

<p>$ git push staging feature_branch:master</p>

<h3>Rbenv &amp; Pow</h3>

<p># ~/.powconfig
<code>export PATH=$(rbenv root)/shims:$(rbenv root)/bin:$PATH</code></p>

<h2>Dependencies / Gems</h2>

<h3>For Will_paginate</h3>

<p>A custom renderer has been created in lib/</p>

<h3>SCSS</h3>

<p>Inuit.css
Compass for mixins</p>

<h3>Add remote branch for Heroku</h3>

<p><code>git remote add heroku git@heroku.com:leboncours.git</code></p>

<h3>Heroku</h3>

<p><a href="https://devcenter.heroku.com/articles/labs-user-env-compile#use-case">Using Labs: user-env-compile</a></p>

<pre><code>heroku labs:enable user-env-compile -a
</code></pre>

<h3>Paperclip</h3>

<p>Dependencies: imagemagick</p>

<h4>Reprocessing images</h4>

<p>h run rake paperclip:refresh CLASS=Course</p>

<h3>For Heroku</h3>

<p><code>heroku config:add AWS_BUCKET=bucket_name</code>
<code>heroku config:add AWS_ACCESS_KEY_ID=</code>
<code>heroku config:add AWS_SECRET_ACCESS_KEY=</code></p>

<h3><a href="https://github.com/sunspot/sunspot#readme">Solr sunspot</a></h3>

<p>Commands
<code>rake sunspot:solr:run</code></p>

<p>On heroku
<code>heroku run rake sunspot:solr:start</code>
<code>heroku run rake sunspot:solr:stop</code>
<code>heroku run rake sunspot:reindex</code></p>

<h3>Git</h3>

<p>Remove local branch
<code>git branch -D branch_name</code>
Remove remote branch
<code>git push origin --delete branch_name</code></p>

<h3>Cities</h3>

<p>http://download.geonames.org/export/zip/</p>

<h3>Sitemap</h3>

<p><code>RAILS_ENV=production rake sitemap:create</code></p>

<h3>Tests</h3>

<p>rake db:test:clone
RAILS_ENV=test rake sunspot:solr:start
$ rspec spec</p>

<h1>Recovering a dump</h1>

<p>killall ruby; dropdb -h localhost -U postgres coursavenue<em>development; createdb -h localhost -O postgres -U postgres coursavenue</em>development &amp;&amp; psql coursavenue<em>development -c 'create extension hstore;' -U postgres &amp;&amp; pg</em>restore --host localhost --port 5432 --username "postgres" --dbname "coursavenue_development" --role "ud9c2iqn1hpp2g" --no-password  --verbose "/Users/Nima/Downloads/a266.dump"; zeus start</p>

<h1>Make a dump</h1>

<p>pg<em>dump --host localhost --port 5432 --username "postgres" --dbname "coursavenue</em>development" -f 19_oct.tar --format=t</p>

<h1>Rubocop</h1>

<p><code>bundle exec rubocop -Ra</code>
  - -R To follow Rails styleguide
  - -a to autocorrect</p>

<h1>Brakeman</h1>

<p><code>bundle exec brakeman -O file.html</code></p>  </td></tr></tbody></table><div id="generated">generated Wed Feb 12 2014 15:40:59 GMT+0100 (CET)  </div></div></body></html>